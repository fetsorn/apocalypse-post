use ecs::*;
use game::*;
use game::terrain::util;
use coord::Coord;

const START_COORD: Coord = Coord { x: 30, y: 4 };

pub fn demo_c<S: TurnScheduleQueue>(ids: &EntityIdReserver,
                                  rng: &GameRng,
                                  schedule: &mut S,
                                  g: &mut EcsAction,
                                  _parent: ParentLevelCtx) -> TerrainMetadata {

    let (width, height) = util::terrain_from_strings(&level_str(), None, ids, schedule, g);

    util::generate_clouds(width, height, ids, rng, schedule, g);

    TerrainMetadata {
        width: width,
        height: height,
        start_coord: START_COORD,
        connection_report: LevelConnectionReport::new(),
    }
}


fn level_str() -> Vec<&'static str> {
    vec!["#########################################",
         "#.......................................#",
         "#.......................................#",
         "#....................######.............#",
         "#....................#..................#",
         "#....................#..................#",
         "#####.....############..................#",
         "#....................#..................#",
         "#....................#........#.........#",
         "#.............................#.........#",
         "#....................#........#.........#",
         "#....................#........#.........#",
         "#....................#........#.........#",
         "#######.##########################......#",
         "#............#...................#......#",
         "#............#...................#......#",
         "#............#..........................#",
         "#................................#......#",
         "#............#...................#......#",
         "#............#...................#......#",
         "#########################################",]
}
